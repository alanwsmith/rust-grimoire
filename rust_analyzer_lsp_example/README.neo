-- title

Rust LSP Server Completion Example

A basic LSP server built powered by the code
from rust_analyzer. It has two baisc examples:

-- olist

1. Code Completion

2. Document formatting


-- notes/

- This project is based off [[this example|
https://github.com/rust-lang/rust-analyzer/blob/master/lib/lsp-server/examples/goto_def.rs]].

That one only does "GotoDefinition". This one provides
Completion and Formatting instead. 

- The original code uses Vfs for a virtual file system. 
That caused me issues. I went to a basic hashmap to
hold the content for the documents. 

- This is set up to send the full contents of the file
to the LSP server on every chanage. Setting up to 
send only file changes is out of scope for this example. 

- This example doesn't make use of any of the work in progress
tokens. They are out of scope for this example. 

- There's ton stuff that's avaialbe with LSPs. For 
examples, check out:

[[The Language Server Protocol home page|
https://microsoft.github.io/language-server-protocol/]]

and

[[The Rust lsp_types crate|
https://docs.rs/lsp-types/latest/lsp_types/index.html]]

- The example sets up to trigger complections that
start with "-". The example shows "-- test" which will
completed from the dahses. It drops the complection
at the space between "--" and "test". Dealing
with that is outside the scope of this example.

- This isn't set up for unsaved files. It expects everything
to have a URI. 



-- /notes

-- pre
-- title: References

https://docs.rs/unicode-segmentation/latest/unicode_segmentation/trait.UnicodeSegmentation.html#tymethod.graphemes

https://docs.rs/lsp-types/latest/lsp_types/all.html

https://docs.rs/lsp-types/latest/lsp_types/request/enum.Completion.html


https://docs.rs/lsp-types/latest/lsp_types/struct.ServerCapabilities.html#structfield.type_definition_provider
https://docs.rs/lsp-types/latest/lsp_types/enum.TextDocumentSyncCapability.html

https://docs.rs/lsp-types/latest/lsp_types/struct.CompletionParams.html

https://docs.rs/lsp-types/latest/lsp_types/struct.CompletionParams.html#structfield.context

https://docs.rs/lsp-types/latest/lsp_types/struct.CompletionContext.html

https://docs.rs/lsp-types/latest/lsp_types/struct.CompletionTriggerKind.html

https://docs.rs/lsp-types/latest/lsp_types/struct.WorkDoneProgressParams.html

https://docs.rs/lsp-types/latest/lsp_types/struct.PartialResultParams.html

https://docs.rs/lsp-types/latest/lsp_types/struct.CompletionContext.html

https://docs.rs/lsp-types/latest/lsp_types/struct.TextDocumentPositionParams.html
https://docs.rs/lsp-types/latest/lsp_types/struct.CompletionContext.html
https://docs.rs/lsp-types/latest/lsp_types/struct.TextDocumentSyncOptions.html
https://docs.rs/lsp-types/latest/lsp_types/enum.TextDocumentSyncCapability.html
https://docs.rs/lsp-types/latest/lsp_types/struct.TextDocumentSyncOptions.html
https://docs.rs/lsp-types/latest/lsp_types/struct.CompletionOptions.html
https://docs.rs/lsp-types/latest/lsp_types/struct.InitializeParams.html
https://docs.rs/lsp-types/latest/lsp_types/struct.WorkDoneProgressParams.html
https://docs.rs/lsp-types/latest/lsp_types/struct.CompletionItem.html
https://docs.rs/lsp-types/latest/lsp_types/struct.ServerCapabilities.html#structfield.text_document_sync
https://docs.rs/lsp-types/latest/lsp_types/enum.TextDocumentSyncCapability.html
https://docs.rs/lsp-types/latest/lsp_types/enum.TextDocumentSyncCapability.html
https://docs.rs/lsp-types/latest/lsp_types/enum.TypeDefinitionProviderCapability.html
https://docs.rs/lsp-types/latest/lsp_types/struct.TextDocumentContentChangeEvent.html
https://docs.rs/lsp-types/latest/lsp_types/request/trait.Request.html
https://docs.rs/lsp-types/latest/lsp_types/notification/index.html
https://docs.rs/lsp-types/latest/lsp_types/notification/enum.DidChangeTextDocument.html
https://docs.rs/lsp-types/latest/lsp_types/request/trait.Request.html#associatedconstant.METHOD

https://docs.rs/lsp-types/latest/lsp_types/request/trait.Request.html#associatedconstant.METHOD
https://docs.rs/lsp-types/latest/lsp_types/struct.DidChangeTextDocumentParams.html
https://docs.rs/lsp-types/latest/lsp_types/struct.TextDocumentContentChangeEvent.html
https://docs.rs/lsp-types/latest/lsp_types/struct.VersionedTextDocumentIdentifier.html
https://docs.rs/lsp-types/latest/lsp_types/struct.CompletionList.html
https://docs.rs/lsp-types/latest/lsp_types/struct.CompletionItem.html
https://docs.rs/lsp-types/latest/lsp_types/request/enum.Completion.html
https://docs.rs/lsp-types/latest/lsp_types/request/trait.Request.html#associatedconstant.METHOD

https://microsoft.github.io/language-server-protocol/specifications/lsp/3.17/specification/

https://docs.rs/lsp-server/latest/lsp_server/
https://github.com/rust-lang/rust-analyzer/tree/master/lib/lsp-server/examples

https://docs.rs/lsp-server/latest/lsp_server/enum.Message.html
https://docs.rs/lsp-server/latest/lsp_server/enum.Message.html#variant.Notification

https://docs.rs/lsp-server/latest/lsp_server/struct.Notification.html

https://docs.rs/lsp-server/latest/lsp_server/enum.Message.html#variant.Response

https://docs.rs/lsp-server/latest/lsp_server/enum.Message.html#variant.Request

https://docs.rs/lsp-server/latest/lsp_server/enum.Message.html#variant.Notification
https://docs.rs/lsp-server/latest/lsp_server/struct.Notification.html
https://docs.rs/lsp-server/latest/lsp_server/struct.Notification.html#structfield.params

https://docs.rs/lsp-server/latest/lsp_server/struct.Response.html

https://docs.rs/lsp-server/latest/lsp_server/struct.Request.html
https://docs.rs/lsp-server/latest/lsp_server/struct.Request.html#method.extract
https://docs.rs/lsp-server/latest/lsp_server/struct.Request.html#structfield.method
https://docs.rs/lsp-server/latest/lsp_server/struct.Request.html#method.extract
https://docs.rs/lsp-types/latest/lsp_types/struct.ServerCapabilities.html#structfield.document_formatting_provider

https://docs.rs/lsp-types/latest/lsp_types/struct.TextEdit.html
https://docs.rs/lsp-types/latest/lsp_types/struct.Range.html



https://docs.rs/lsp-types/latest/lsp_types/struct.Position.html
https://docs.rs/tracing/latest/tracing/

https://docs.rs/lsp-server/latest/lsp_server/

https://docs.rs/lsp-types/latest/lsp_types/struct.ServerCapabilities.html




-- page
-- created: 2025-06-14T12:10:55-04:00
-- updated: 2025-06-14T12:10:55-04:00
-- id: 2y/vq/r2/6g
-- template: post
-- status: scratch


